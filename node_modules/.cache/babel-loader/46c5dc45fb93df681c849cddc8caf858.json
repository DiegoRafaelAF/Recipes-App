{"ast":null,"code":"import _slicedToArray from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useState,useContext,useEffect}from'react';import{Redirect}from'react-router-dom';import share from\"../images/shareIcon.svg\";import notFavorite from\"../images/whiteHeartIcon.svg\";import favorite from\"../images/blackHeartIcon.svg\";import{ContextAplication}from'../context/ContextAplication';export function copyToClipboard(setHide){navigator.clipboard.writeText(window.location.href);setHide(false);setTimeout(function(){setHide(true);},2000);}export function getDoneLocalStorage(id){var storage=JSON.parse(localStorage.getItem('doneRecipes'));var done;if(!storage){done=false;}else{done=storage.find(function(e){return e.id===id;});}return done;}function getStartedLocalStorage(id){var storage=JSON.parse(localStorage.getItem('inProgressRecipes'));var started;if(!storage||storage.meals===undefined){started=false;}else{started=Object.keys(storage.meals).find(function(e){return e===id;});}return started;}export function getIfHasBeenFavorited(id){var storage=JSON.parse(localStorage.getItem('favoriteRecipes'));if(storage){var favorited=storage.some(function(e){return e.id===id;});return favorited;}return false;}function clickFavorite(setIsFavorite,recipeInfo,isFavorite){setIsFavorite(function(fav){return!fav;});var idMeal=recipeInfo.idMeal,strArea=recipeInfo.strArea,strCategory=recipeInfo.strCategory,strMeal=recipeInfo.strMeal,strMealThumb=recipeInfo.strMealThumb;var mealInfo={id:idMeal,type:'comida',area:strArea,category:strCategory,alcoholicOrNot:'',name:strMeal,image:strMealThumb};var storage=JSON.parse(localStorage.getItem('favoriteRecipes'));if(!storage){storage=[];}if(!isFavorite){var newStorage=[].concat(_toConsumableArray(storage),[mealInfo]);localStorage.setItem('favoriteRecipes',JSON.stringify(newStorage));}if(isFavorite){var _newStorage=storage.filter(function(e){return e.id!==idMeal;});localStorage.setItem('favoriteRecipes',JSON.stringify(_newStorage));}}function renderFavoriteButton(setIsFavorite,recipeInfo,isFavorite,goToRoute,id){return/*#__PURE__*/React.createElement(\"div\",{className:\"share-and-favourite\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"favourite\",onClick:function onClick(){return clickFavorite(setIsFavorite,recipeInfo,isFavorite);},src:favorite},getIfHasBeenFavorited(id)?/*#__PURE__*/React.createElement(\"img\",{\"data-testid\":\"favorite-btn\",src:favorite,alt:\"favorite\"}):/*#__PURE__*/React.createElement(\"img\",{\"data-testid\":\"favorite-btn\",src:notFavorite,alt:\"favorite\"})),goToRoute&&/*#__PURE__*/React.createElement(Redirect,{to:\"/comidas/\".concat(id,\"/in-progress\")}));}function renderShareButton(setHide){return/*#__PURE__*/React.createElement(\"div\",{className:\"share-and-favourite\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return copyToClipboard(setHide);},className:\"favourite\"},/*#__PURE__*/React.createElement(\"img\",{\"data-testid\":\"share-btn\",src:share,alt:\"icon\"})));}function Buttons(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),goToRoute=_useState2[0],setGoToRoute=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFavorite=_useState4[0],setIsFavorite=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),hide=_useState6[0],setHide=_useState6[1];var _useContext=useContext(ContextAplication),recipeInfo=_useContext.recipeInfo,id=_useContext.id;useEffect(function(){if(getIfHasBeenFavorited(id)){setIsFavorite(true);}},[]);return/*#__PURE__*/React.createElement(\"div\",{className:\"bottom-buttons\"},renderFavoriteButton(setIsFavorite,recipeInfo,isFavorite,goToRoute,id),!getDoneLocalStorage(id)&&!getStartedLocalStorage(id)&&/*#__PURE__*/React.createElement(\"button\",{\"data-testid\":\"start-recipe-btn\",type:\"button\",onClick:function onClick(){return setGoToRoute(true);},className:\"start-button\"},\"Iniciar Receita\"),getStartedLocalStorage(id)&&!getDoneLocalStorage(id)&&/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"start-button\",\"data-testid\":\"start-recipe-btn\",onClick:function onClick(){return setGoToRoute(true);}},\"Continuar Receita\"),renderShareButton(setHide),/*#__PURE__*/React.createElement(\"p\",{className:\"alert\",hidden:hide},\"Link copiado!\"),goToRoute&&/*#__PURE__*/React.createElement(Redirect,{to:\"/comidas/\".concat(id,\"/in-progress\")}));}export default Buttons;","map":{"version":3,"sources":["/home/diego/GitHub/recipes-app/src/components/FoodButtons.jsx"],"names":["React","useState","useContext","useEffect","Redirect","ContextAplication","copyToClipboard","setHide","navigator","clipboard","writeText","window","location","href","setTimeout","getDoneLocalStorage","id","storage","JSON","parse","localStorage","getItem","done","find","e","getStartedLocalStorage","started","meals","undefined","Object","keys","getIfHasBeenFavorited","favorited","some","clickFavorite","setIsFavorite","recipeInfo","isFavorite","fav","idMeal","strArea","strCategory","strMeal","strMealThumb","mealInfo","type","area","category","alcoholicOrNot","name","image","newStorage","setItem","stringify","filter","renderFavoriteButton","goToRoute","favorite","notFavorite","renderShareButton","share","Buttons","setGoToRoute","hide"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport share from '../images/shareIcon.svg';\nimport notFavorite from '../images/whiteHeartIcon.svg';\nimport favorite from '../images/blackHeartIcon.svg';\nimport { ContextAplication } from '../context/ContextAplication';\n\nexport function copyToClipboard(setHide) {\n  navigator.clipboard.writeText(window.location.href);\n  setHide(false);\n  setTimeout(() => {\n    setHide(true);\n  }, 2000);\n}\n\nexport function getDoneLocalStorage(id) {\n  const storage = JSON.parse(localStorage.getItem('doneRecipes'));\n  let done;\n  if (!storage) {\n    done = false;\n  } else {\n    done = storage.find((e) => e.id === id);\n  }\n  return done;\n}\n\nfunction getStartedLocalStorage(id) {\n  const storage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  let started;\n  if (!storage || storage.meals === undefined) {\n    started = false;\n  } else {\n    started = Object.keys(storage.meals).find((e) => e === id);\n  }\n  return started;\n}\n\nexport function getIfHasBeenFavorited(id) {\n  const storage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n  if (storage) {\n    const favorited = storage.some((e) => e.id === id);\n    return favorited;\n  }\n  return false;\n}\n\nfunction clickFavorite(setIsFavorite, recipeInfo, isFavorite) {\n  setIsFavorite((fav) => !fav);\n  const {\n    idMeal, strArea, strCategory, strMeal, strMealThumb,\n  } = recipeInfo;\n  const mealInfo = {\n    id: idMeal,\n    type: 'comida',\n    area: strArea,\n    category: strCategory,\n    alcoholicOrNot: '',\n    name: strMeal,\n    image: strMealThumb,\n  };\n  let storage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n  if (!storage) {\n    storage = [];\n  }\n  if (!isFavorite) {\n    const newStorage = [...storage, mealInfo];\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n  if (isFavorite) {\n    const newStorage = storage.filter((e) => e.id !== idMeal);\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n}\n\nfunction renderFavoriteButton(setIsFavorite, recipeInfo, isFavorite, goToRoute, id) {\n  return (\n    <div className=\"share-and-favourite\">\n      <button\n        type=\"button\"\n        className=\"favourite\"\n        onClick={() => clickFavorite(setIsFavorite, recipeInfo, isFavorite)}\n        src={favorite}\n      >\n        {getIfHasBeenFavorited(id)\n          ? <img data-testid=\"favorite-btn\" src={favorite} alt=\"favorite\" />\n          : <img data-testid=\"favorite-btn\" src={notFavorite} alt=\"favorite\" />}\n      </button>\n      {goToRoute && <Redirect to={`/comidas/${id}/in-progress`} />}\n    </div>\n  );\n}\n\nfunction renderShareButton(setHide) {\n  return (\n    <div className=\"share-and-favourite\">\n      <button\n        type=\"button\"\n        onClick={() => copyToClipboard(setHide)}\n        className=\"favourite\"\n      >\n        <img data-testid=\"share-btn\" src={share} alt=\"icon\" />\n      </button>\n    </div>\n  );\n}\n\nfunction Buttons() {\n  const [goToRoute, setGoToRoute] = useState(false);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [hide, setHide] = useState(true);\n  const { recipeInfo, id } = useContext(ContextAplication);\n  useEffect(() => {\n    if (getIfHasBeenFavorited(id)) { setIsFavorite(true); }\n  }, []);\n\n  return (\n    <div className=\"bottom-buttons\">\n      {renderFavoriteButton(setIsFavorite, recipeInfo, isFavorite, goToRoute, id)}\n      {!getDoneLocalStorage(id) && !getStartedLocalStorage(id) && (\n        <button\n          data-testid=\"start-recipe-btn\"\n          type=\"button\"\n          onClick={() => setGoToRoute(true)}\n          className=\"start-button\"\n        >\n          Iniciar Receita\n        </button>\n      )}\n      {getStartedLocalStorage(id) && !getDoneLocalStorage(id) && (\n        <button\n          type=\"button\"\n          className=\"start-button\"\n          data-testid=\"start-recipe-btn\"\n          onClick={() => setGoToRoute(true)}\n        >\n          Continuar Receita\n        </button>\n      )}\n      {renderShareButton(setHide)}\n      <p className=\"alert\" hidden={hide}>Link copiado!</p>\n      {goToRoute && <Redirect to={`/comidas/${id}/in-progress`} />}\n    </div>\n  );\n}\n\nexport default Buttons;\n"]},"metadata":{},"sourceType":"module"}