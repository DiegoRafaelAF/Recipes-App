{"ast":null,"code":"import _slicedToArray from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useState,useContext,useEffect}from'react';import{Redirect}from'react-router-dom';import share from\"../images/shareIcon.svg\";import notFavorite from\"../images/whiteHeartIcon.svg\";import favorite from\"../images/blackHeartIcon.svg\";import{getDoneLocalStorage,getIfHasBeenFavorited,copyToClipboard}from'./FoodButtons';import{ContextAplication}from'../context/ContextAplication';function clickFavorite(setIsFavorite,recipeInfo,isFavorite){setIsFavorite(function(fav){return!fav;});var idDrink=recipeInfo.idDrink,strDrink=recipeInfo.strDrink,strDrinkThumb=recipeInfo.strDrinkThumb,strAlcoholic=recipeInfo.strAlcoholic,strCategory=recipeInfo.strCategory;var drinkInfo={id:idDrink,type:'bebida',area:'',category:strCategory,alcoholicOrNot:strAlcoholic,name:strDrink,image:strDrinkThumb};var storage=JSON.parse(localStorage.getItem('favoriteRecipes'));if(!storage){storage=[];}if(!isFavorite){var newStorage=[].concat(_toConsumableArray(storage),[drinkInfo]);localStorage.setItem('favoriteRecipes',JSON.stringify(newStorage));}if(isFavorite){var _newStorage=storage.filter(function(e){return e.id!==idDrink;});localStorage.setItem('favoriteRecipes',JSON.stringify(_newStorage));}}function getStartedLocalStorage(id){var storage=JSON.parse(localStorage.getItem('inProgressRecipes'));var started;if(!storage||storage.cocktails===undefined){started=false;}else{started=Object.keys(storage.cocktails).find(function(e){return e===id;});}return started;}function renderFavoriteButton(setIsFavorite,recipeInfo,isFavorite,goToRoute,id){return/*#__PURE__*/React.createElement(\"div\",{className:\"share-and-favourite\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"favourite\",onClick:function onClick(){return clickFavorite(setIsFavorite,recipeInfo,isFavorite);},src:favorite},getIfHasBeenFavorited(id)?/*#__PURE__*/React.createElement(\"img\",{\"data-testid\":\"favorite-btn\",src:favorite,alt:\"favorite\"}):/*#__PURE__*/React.createElement(\"img\",{\"data-testid\":\"favorite-btn\",src:notFavorite,alt:\"favorite\"})),goToRoute&&/*#__PURE__*/React.createElement(Redirect,{to:\"/bebidas/\".concat(id,\"/in-progress\")}));}function renderShareButton(setHide){return/*#__PURE__*/React.createElement(\"div\",{className:\"share-and-favourite\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return copyToClipboard(setHide);},className:\"favourite\"},/*#__PURE__*/React.createElement(\"img\",{\"data-testid\":\"share-btn\",src:share,alt:\"icon\"})));}function Buttons(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),goToRoute=_useState2[0],setGoToRoute=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFavorite=_useState4[0],setIsFavorite=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),hide=_useState6[0],setHide=_useState6[1];var _useContext=useContext(ContextAplication),recipeInfo=_useContext.recipeInfo,id=_useContext.id;useEffect(function(){if(getIfHasBeenFavorited(id)){setIsFavorite(true);}},[id]);return/*#__PURE__*/React.createElement(\"div\",{className:\"bottom-buttons\"},renderFavoriteButton(setIsFavorite,recipeInfo,isFavorite,goToRoute,id),!getDoneLocalStorage(id)&&!getStartedLocalStorage(id)&&/*#__PURE__*/React.createElement(\"button\",{\"data-testid\":\"start-recipe-btn\",type:\"button\",onClick:function onClick(){return setGoToRoute(true);},className:\"start-button\"},\"Iniciar Receita\"),getStartedLocalStorage(id)&&!getDoneLocalStorage(id)&&/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"start-button\",\"data-testid\":\"start-recipe-btn\",onClick:function onClick(){return setGoToRoute(true);}},\"Continuar Receita\"),renderShareButton(setHide),/*#__PURE__*/React.createElement(\"p\",{className:\"alert\",hidden:hide},\"Link copiado!\"),goToRoute&&/*#__PURE__*/React.createElement(Redirect,{to:\"/bebidas/\".concat(id,\"/in-progress\")}));}export default Buttons;","map":{"version":3,"sources":["/home/diego/GitHub/recipes-app/src/components/DrinkButtons.jsx"],"names":["React","useState","useContext","useEffect","Redirect","getDoneLocalStorage","getIfHasBeenFavorited","copyToClipboard","ContextAplication","clickFavorite","setIsFavorite","recipeInfo","isFavorite","fav","idDrink","strDrink","strDrinkThumb","strAlcoholic","strCategory","drinkInfo","id","type","area","category","alcoholicOrNot","name","image","storage","JSON","parse","localStorage","getItem","newStorage","setItem","stringify","filter","e","getStartedLocalStorage","started","cocktails","undefined","Object","keys","find","renderFavoriteButton","goToRoute","favorite","notFavorite","renderShareButton","setHide","share","Buttons","setGoToRoute","hide"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport share from '../images/shareIcon.svg';\nimport notFavorite from '../images/whiteHeartIcon.svg';\nimport favorite from '../images/blackHeartIcon.svg';\nimport {\n  getDoneLocalStorage,\n  getIfHasBeenFavorited,\n  copyToClipboard,\n} from './FoodButtons';\nimport { ContextAplication } from '../context/ContextAplication';\n\nfunction clickFavorite(setIsFavorite, recipeInfo, isFavorite) {\n  setIsFavorite((fav) => !fav);\n  const {\n    idDrink, strDrink, strDrinkThumb, strAlcoholic, strCategory,\n  } = recipeInfo;\n  const drinkInfo = {\n    id: idDrink,\n    type: 'bebida',\n    area: '',\n    category: strCategory,\n    alcoholicOrNot: strAlcoholic,\n    name: strDrink,\n    image: strDrinkThumb,\n  };\n  let storage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n  if (!storage) {\n    storage = [];\n  }\n  if (!isFavorite) {\n    const newStorage = [...storage, drinkInfo];\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n  if (isFavorite) {\n    const newStorage = storage.filter((e) => e.id !== idDrink);\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n}\n\nfunction getStartedLocalStorage(id) {\n  const storage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  let started;\n  if (!storage || storage.cocktails === undefined) {\n    started = false;\n  } else {\n    started = Object.keys(storage.cocktails).find((e) => e === id);\n  }\n  return started;\n}\n\nfunction renderFavoriteButton(setIsFavorite, recipeInfo, isFavorite, goToRoute, id) {\n  return (\n    <div className=\"share-and-favourite\">\n      <button\n        type=\"button\"\n        className=\"favourite\"\n        onClick={() => clickFavorite(setIsFavorite, recipeInfo, isFavorite)}\n        src={favorite}\n      >\n        {getIfHasBeenFavorited(id)\n          ? <img data-testid=\"favorite-btn\" src={favorite} alt=\"favorite\" />\n          : <img data-testid=\"favorite-btn\" src={notFavorite} alt=\"favorite\" />}\n      </button>\n      {goToRoute && <Redirect to={`/bebidas/${id}/in-progress`} />}\n    </div>\n  );\n}\n\nfunction renderShareButton(setHide) {\n  return (\n    <div className=\"share-and-favourite\">\n      <button\n        type=\"button\"\n        onClick={() => copyToClipboard(setHide)}\n        className=\"favourite\"\n      >\n        <img data-testid=\"share-btn\" src={share} alt=\"icon\" />\n      </button>\n    </div>\n  );\n}\n\nfunction Buttons() {\n  const [goToRoute, setGoToRoute] = useState(false);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [hide, setHide] = useState(true);\n  const { recipeInfo, id } = useContext(ContextAplication);\n  useEffect(() => {\n    if (getIfHasBeenFavorited(id)) { setIsFavorite(true); }\n  }, [id]);\n  return (\n    <div className=\"bottom-buttons\">\n      {renderFavoriteButton(setIsFavorite, recipeInfo, isFavorite, goToRoute, id)}\n      {!getDoneLocalStorage(id) && !getStartedLocalStorage(id) && (\n        <button\n          data-testid=\"start-recipe-btn\"\n          type=\"button\"\n          onClick={() => setGoToRoute(true)}\n          className=\"start-button\"\n        >\n          Iniciar Receita\n        </button>\n      )}\n      {getStartedLocalStorage(id) && !getDoneLocalStorage(id) && (\n        <button\n          type=\"button\"\n          className=\"start-button\"\n          data-testid=\"start-recipe-btn\"\n          onClick={() => setGoToRoute(true)}\n        >\n          Continuar Receita\n        </button>\n      )}\n      {renderShareButton(setHide)}\n      <p className=\"alert\" hidden={hide}>Link copiado!</p>\n      {goToRoute && <Redirect to={`/bebidas/${id}/in-progress`} />}\n    </div>\n  );\n}\n\nexport default Buttons;\n"]},"metadata":{},"sourceType":"module"}