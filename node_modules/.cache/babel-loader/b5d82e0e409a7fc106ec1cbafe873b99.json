{"ast":null,"code":"import _slicedToArray from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState}from'react';import{Redirect}from'react-router-dom';export function getDate(){var today=new Date();var dd=String(today.getDate()).padStart(2,'0');var mm=String(today.getMonth()+1).padStart(2,'0');var yyyy=today.getFullYear();today=\"\".concat(mm,\"/\").concat(dd,\"/\").concat(yyyy);return today;}export function handleChecked(event,value,type,values){var checked=values.checked,setCountChecked=values.setCountChecked,countChecked=values.countChecked,checkLocalStorage=values.checkLocalStorage,setChecked=values.setChecked,id=values.id;checked.checkbox.forEach(function(checkbox,i){if(event.target.checked===true){setCountChecked(countChecked+1);}if(event.target.checked===false){if(checkLocalStorage.countChecked<0){setCountChecked(countChecked+1);}else{setCountChecked(countChecked-1);}}if(checkbox.id===Number(event.target.id)){checked.checkbox[i].checked=event.target.checked;}});setChecked(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{checked:_objectSpread(_objectSpread({},prevState.checkbox.checked),{},{checkbox:value})});});var newStorage=_objectSpread(_objectSpread({},checkLocalStorage),{},{cocktails:_objectSpread(_objectSpread({},checkLocalStorage.cocktails),{},_defineProperty({},id,_toConsumableArray(checked.checkbox)))});localStorage.setItem('inProgressRecipes',JSON.stringify(newStorage));}function doneRecipe(recipeInfo,setGoToRoute){var idDrink=recipeInfo.idDrink,strDrink=recipeInfo.strDrink,strDrinkThumb=recipeInfo.strDrinkThumb,strAlcoholic=recipeInfo.strAlcoholic,strCategory=recipeInfo.strCategory,strTags=recipeInfo.strTags;var drinkInfo={id:idDrink,type:'comida',area:'',category:strCategory,alcoholicOrNot:strAlcoholic,name:strDrink,image:strDrinkThumb,doneDate:getDate(),tags:strTags===null?[]:strTags.split(',')};var storage=JSON.parse(localStorage.getItem('doneRecipes'));if(!storage){storage=[];var newStorage=[].concat(_toConsumableArray(storage),[drinkInfo]);localStorage.setItem('doneRecipes',JSON.stringify(newStorage));}else{var _newStorage=[].concat(_toConsumableArray(storage),[drinkInfo]);localStorage.setItem('doneRecipes',JSON.stringify(_newStorage));}setGoToRoute(true);}var renderButton=function renderButton(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"start-button in-progress\",disabled:true,\"data-testid\":\"finish-recipe-btn\",type:\"button\"},\"Finish Recipe Button\"));};function CockTailsControlsRecipeProgress(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),goToRoute=_useState2[0],setGoToRoute=_useState2[1];var valuesToRender=props.valuesToRender;var inProgressDrink=valuesToRender.inProgressDrink,data=valuesToRender.data,checkLocalStorage=valuesToRender.checkLocalStorage,buttonEnabled=valuesToRender.buttonEnabled,id=valuesToRender.id,checked=valuesToRender.checked;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,inProgressDrink.strDrink),/*#__PURE__*/React.createElement(\"h2\",{\"data-testid\":\"recipe-category\"},inProgressDrink.strCategory),/*#__PURE__*/React.createElement(\"h3\",{\"data-testid\":\"recipe-title\"},\" Ingredients \"),data.map(function(element,i){return/*#__PURE__*/React.createElement(\"div\",{key:element.meal,\"data-testid\":\"\".concat(i,\"-ingredient-step\")},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"input\",{id:i,type:\"checkbox\",checked:checkLocalStorage.cocktails[id][i].checked,name:element.drink,onClick:function onClick(event){return handleChecked(event,checked.checkbox[i].checked,'cocktails',valuesToRender);}}),/*#__PURE__*/React.createElement(\"span\",null,element.meal),element.mensure));}),/*#__PURE__*/React.createElement(\"div\",{className:\"instructions\",\"data-testid\":\"instructions\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Instru\\xE7\\xF5es\"),inProgressDrink.strInstructions),buttonEnabled?/*#__PURE__*/React.createElement(\"button\",{className:\"start-button in-progress\",enable:true,\"data-testid\":\"finish-recipe-btn\",onClick:function onClick(){return doneRecipe(inProgressDrink,setGoToRoute);},type:\"button\"},\"Finish Recipe Button\"):renderButton(),goToRoute&&/*#__PURE__*/React.createElement(Redirect,{to:\"/receitas-feitas\"}));}export default CockTailsControlsRecipeProgress;","map":{"version":3,"sources":["/home/diego/GitHub/recipes-app/src/components/helpersComponents/CockTailsControlsRecipeProgress.jsx"],"names":["React","useState","Redirect","getDate","today","Date","dd","String","padStart","mm","getMonth","yyyy","getFullYear","handleChecked","event","value","type","values","checked","setCountChecked","countChecked","checkLocalStorage","setChecked","id","checkbox","forEach","i","target","Number","prevState","newStorage","cocktails","localStorage","setItem","JSON","stringify","doneRecipe","recipeInfo","setGoToRoute","idDrink","strDrink","strDrinkThumb","strAlcoholic","strCategory","strTags","drinkInfo","area","category","alcoholicOrNot","name","image","doneDate","tags","split","storage","parse","getItem","renderButton","CockTailsControlsRecipeProgress","props","goToRoute","valuesToRender","inProgressDrink","data","buttonEnabled","map","element","meal","drink","mensure","strInstructions"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Redirect } from 'react-router-dom';\n\nexport function getDate() {\n  let today = new Date();\n  const dd = String(today.getDate()).padStart(2, '0');\n  const mm = String(today.getMonth() + 1).padStart(2, '0');\n  const yyyy = today.getFullYear();\n  today = `${mm}/${dd}/${yyyy}`;\n  return today;\n}\n\nexport function handleChecked(event, value, type, values) {\n  const {\n    checked, setCountChecked, countChecked, checkLocalStorage, setChecked, id,\n  } = values;\n  checked.checkbox.forEach((checkbox, i) => {\n    if (event.target.checked === true) {\n      setCountChecked(countChecked + 1);\n    } if (event.target.checked === false) {\n      if (checkLocalStorage.countChecked < 0) {\n        setCountChecked(countChecked + 1);\n      } else {\n        setCountChecked(countChecked - 1);\n      }\n    }\n    if (checkbox.id === Number(event.target.id)) {\n      checked.checkbox[i].checked = event.target.checked;\n    }\n  });\n  setChecked((prevState) => ({\n    ...prevState,\n    checked: {\n      ...prevState.checkbox.checked,\n      checkbox: value,\n    },\n  }));\n  const newStorage = {\n    ...checkLocalStorage,\n    cocktails: { ...checkLocalStorage.cocktails, [id]: [...checked.checkbox] },\n  };\n  localStorage.setItem('inProgressRecipes', JSON.stringify(newStorage));\n}\n\nfunction doneRecipe(recipeInfo, setGoToRoute) {\n  const {\n    idDrink, strDrink, strDrinkThumb, strAlcoholic, strCategory, strTags,\n  } = recipeInfo;\n  const drinkInfo = {\n    id: idDrink,\n    type: 'comida',\n    area: '',\n    category: strCategory,\n    alcoholicOrNot: strAlcoholic,\n    name: strDrink,\n    image: strDrinkThumb,\n    doneDate: getDate(),\n    tags: strTags === null ? [] : strTags.split(','),\n  };\n  let storage = JSON.parse(localStorage.getItem('doneRecipes'));\n  if (!storage) {\n    storage = [];\n    const newStorage = [...storage, drinkInfo];\n    localStorage.setItem('doneRecipes', JSON.stringify(newStorage));\n  } else {\n    const newStorage = [...storage, drinkInfo];\n    localStorage.setItem('doneRecipes', JSON.stringify(newStorage));\n  }\n  setGoToRoute(true);\n}\n\nconst renderButton = () => (\n  <div>\n    <button\n      className=\"start-button in-progress\"\n      disabled\n      data-testid=\"finish-recipe-btn\"\n      type=\"button\"\n    >\n      Finish Recipe Button\n    </button>\n  </div>\n);\n\nfunction CockTailsControlsRecipeProgress(props) {\n  const [goToRoute, setGoToRoute] = useState(false); const { valuesToRender } = props;\n  const {\n    inProgressDrink, data, checkLocalStorage, buttonEnabled,\n    id, checked,\n  } = valuesToRender;\n  return (\n    <div>\n      <h1>{inProgressDrink.strDrink}</h1>\n      <h2 data-testid=\"recipe-category\">{inProgressDrink.strCategory}</h2>\n      <h3 data-testid=\"recipe-title\"> Ingredients </h3>\n      {data.map((element, i) => (\n        <div key={element.meal} data-testid={`${i}-ingredient-step`}>\n          <span>\n            <input\n              id={i}\n              type=\"checkbox\"\n              checked={checkLocalStorage.cocktails[id][i].checked}\n              name={element.drink}\n              onClick={(event) => handleChecked(event, checked.checkbox[i].checked, 'cocktails', valuesToRender)}\n            />\n            <span>{element.meal}</span>\n            {element.mensure}\n          </span>\n        </div>\n      ))}\n      <div className=\"instructions\" data-testid=\"instructions\">\n        <h3>Instruções</h3>\n        {inProgressDrink.strInstructions}\n      </div>\n      {buttonEnabled\n        ? (\n          <button\n            className=\"start-button in-progress\"\n            enable\n            data-testid=\"finish-recipe-btn\"\n            onClick={() => doneRecipe(inProgressDrink, setGoToRoute)}\n            type=\"button\"\n          >\n            Finish Recipe Button\n          </button>\n        )\n        : renderButton()}\n      {goToRoute && <Redirect to=\"/receitas-feitas\" />}\n    </div>\n  );\n}\nCockTailsControlsRecipeProgress.propTypes = {\n  valuesToRender: PropTypes.string.isRequired,\n};\n\nexport default CockTailsControlsRecipeProgress;\n"]},"metadata":{},"sourceType":"module"}