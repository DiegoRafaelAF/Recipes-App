{"ast":null,"code":"import _toConsumableArray from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Redirect,Link}from'react-router-dom';import*as api from'../services/drink-api';function checkResults(data,setResult,setGoToRoute,setId){if(data===undefined||data.drinks===null){alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');}else if(data.drinks.length===1){setId(data.drinks[0].idDrink);setGoToRoute(true);}else if(data.drinks.length>1){setResult(data.drinks);}}function renderRadioButtons(setSearchBy,setDisabled){return/*#__PURE__*/React.createElement(\"div\",{className:\"radio-buttons\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"ingredient\"},/*#__PURE__*/React.createElement(\"input\",{id:\"ingredient\",type:\"radio\",name:\"search\",\"data-testid\":\"ingredient-search-radio\",onChange:function onChange(e){setSearchBy(e.target.id);setDisabled(false);}}),\"Ingrediente\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},/*#__PURE__*/React.createElement(\"input\",{\"data-testid\":\"name-search-radio\",id:\"name\",type:\"radio\",name:\"search\",onChange:function onChange(e){setSearchBy(e.target.id);setDisabled(false);}}),\"Nome\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"first-letter\"},/*#__PURE__*/React.createElement(\"input\",{\"data-testid\":\"first-letter-search-radio\",id:\"first-letter\",type:\"radio\",name:\"search\",onChange:function onChange(e){setSearchBy(e.target.id);setDisabled(false);}}),\"Primeira Letra\"));}function doSearch(searchBy,searchedItem,setResult,setGoToRoute,setId){switch(searchBy){case'ingredient':{api.getDrinksByIngredient(searchedItem).then(function(data){return checkResults(data,setResult,setGoToRoute,setId);});break;}case'name':{api.getDrinksByName(searchedItem).then(function(data){return checkResults(data,setResult,setGoToRoute,setId);});break;}default:{if(searchedItem.length>1){alert('Sua busca deve conter somente 1 (um) caracter');}if(searchedItem.length===1){api.getDrinksByLetter(searchedItem).then(function(data){return checkResults(data,setResult,setGoToRoute,setId);});}}}}function DrinkSearchBar(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchedItem=_useState2[0],setSearchedItem=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchBy=_useState4[0],setSearchBy=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),result=_useState6[0],setResult=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),goToRoute=_useState8[0],setGoToRoute=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),id=_useState10[0],setId=_useState10[1];var _useState11=useState('true'),_useState12=_slicedToArray(_useState11,2),disabled=_useState12[0],setDisabled=_useState12[1];return/*#__PURE__*/React.createElement(\"div\",{className:\"search-area slide-in-top\"},/*#__PURE__*/React.createElement(\"input\",{\"data-testid\":\"search-input\",id:\"searched-item\",type:\"text\",onChange:function onChange(e){return setSearchedItem(e.target.value);},value:searchedItem,placeholder:\"Buscar\"}),renderRadioButtons(setSearchBy,setDisabled),/*#__PURE__*/React.createElement(\"button\",{\"data-testid\":\"exec-search-btn\",onClick:function onClick(){return doSearch(searchBy,searchedItem,setResult,setGoToRoute,setId);},className:\"search-button\",type:\"button\",disabled:disabled},\"Buscar\"),/*#__PURE__*/React.createElement(\"div\",{className:\"recipes-results\"},result.reduce(function(arr,e,i){if(i<12){return[].concat(_toConsumableArray(arr),[/*#__PURE__*/React.createElement(Link,{to:\"/bebidas/\".concat(e.idDrink)},/*#__PURE__*/React.createElement(\"div\",{className:\"product-pic product-pic-\".concat(i),\"data-testid\":\"\".concat(i,\"-recipe-card\"),key:e.idDrink},/*#__PURE__*/React.createElement(\"img\",{src:e.strDrinkThumb,className:\"recipe-image\",\"data-testid\":\"\".concat(i,\"-card-img\"),alt:\"thumbnail\",width:\"150px\"}),/*#__PURE__*/React.createElement(\"h5\",{\"data-testid\":\"\".concat(i,\"-card-name\")},e.strDrink.length>30?\"\".concat(e.strDrink.slice(0,30),\"...\"):e.strDrink)))]);}return arr;},[])),goToRoute&&/*#__PURE__*/React.createElement(Redirect,{to:\"/bebidas/\".concat(id)}));}export default DrinkSearchBar;","map":{"version":3,"sources":["/home/diego/GitHub/recipes-app/src/components/DrinkSearchBar.jsx"],"names":["React","useState","Redirect","Link","api","checkResults","data","setResult","setGoToRoute","setId","undefined","drinks","alert","length","idDrink","renderRadioButtons","setSearchBy","setDisabled","e","target","id","doSearch","searchBy","searchedItem","getDrinksByIngredient","then","getDrinksByName","getDrinksByLetter","DrinkSearchBar","setSearchedItem","result","goToRoute","disabled","value","reduce","arr","i","strDrinkThumb","strDrink","slice"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport * as api from '../services/drink-api';\n\nfunction checkResults(data, setResult, setGoToRoute, setId) {\n  if (data === undefined || data.drinks === null) {\n    alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n  } else if (data.drinks.length === 1) {\n    setId(data.drinks[0].idDrink);\n    setGoToRoute(true);\n  } else if (data.drinks.length > 1) {\n    setResult(data.drinks);\n  }\n}\n\nfunction renderRadioButtons(setSearchBy, setDisabled) {\n  return (\n    <div className=\"radio-buttons\">\n      <label htmlFor=\"ingredient\">\n        <input\n          id=\"ingredient\"\n          type=\"radio\"\n          name=\"search\"\n          data-testid=\"ingredient-search-radio\"\n          onChange={(e) => {\n            setSearchBy(e.target.id);\n            setDisabled(false);\n          }}\n        />\n        Ingrediente\n      </label>\n      <label htmlFor=\"name\">\n        <input\n          data-testid=\"name-search-radio\"\n          id=\"name\"\n          type=\"radio\"\n          name=\"search\"\n          onChange={(e) => {\n            setSearchBy(e.target.id);\n            setDisabled(false);\n          }}\n        />\n        Nome\n      </label>\n      <label htmlFor=\"first-letter\">\n        <input\n          data-testid=\"first-letter-search-radio\"\n          id=\"first-letter\"\n          type=\"radio\"\n          name=\"search\"\n          onChange={(e) => {\n            setSearchBy(e.target.id);\n            setDisabled(false);\n          }}\n        />\n        Primeira Letra\n      </label>\n    </div>\n  );\n}\n\nfunction doSearch(searchBy, searchedItem, setResult, setGoToRoute, setId) {\n  switch (searchBy) {\n    case 'ingredient': {\n      api.getDrinksByIngredient(searchedItem)\n        .then((data) => checkResults(data, setResult, setGoToRoute, setId));\n      break;\n    }\n    case 'name': {\n      api.getDrinksByName(searchedItem)\n        .then((data) => checkResults(data, setResult, setGoToRoute, setId));\n      break;\n    }\n    default: {\n      if (searchedItem.length > 1) { alert('Sua busca deve conter somente 1 (um) caracter'); }\n      if (searchedItem.length === 1) {\n        api.getDrinksByLetter(searchedItem)\n          .then((data) => checkResults(data, setResult, setGoToRoute, setId));\n      }\n    }\n  }\n}\n\nfunction DrinkSearchBar() {\n  const [searchedItem, setSearchedItem] = useState('');\n  const [searchBy, setSearchBy] = useState('');\n  const [result, setResult] = useState([]);\n  const [goToRoute, setGoToRoute] = useState(false);\n  const [id, setId] = useState('');\n  const [disabled, setDisabled] = useState('true');\n\n  return (\n    <div className=\"search-area slide-in-top\">\n      <input\n        data-testid=\"search-input\"\n        id=\"searched-item\"\n        type=\"text\"\n        onChange={(e) => setSearchedItem(e.target.value)}\n        value={searchedItem}\n        placeholder=\"Buscar\"\n      />\n      {renderRadioButtons(setSearchBy, setDisabled)}\n      <button\n        data-testid=\"exec-search-btn\"\n        onClick={() => doSearch(searchBy, searchedItem, setResult, setGoToRoute, setId)}\n        className=\"search-button\"\n        type=\"button\"\n        disabled={disabled}\n      >\n        Buscar\n      </button>\n      <div className=\"recipes-results\">\n        {result.reduce((arr, e, i) => {\n          if (i < 12) {\n            return [...arr,\n              <Link to={`/bebidas/${e.idDrink}`}>\n                <div className={`product-pic product-pic-${i}`} data-testid={`${i}-recipe-card`} key={e.idDrink}>\n                  <img src={e.strDrinkThumb} className=\"recipe-image\" data-testid={`${i}-card-img`} alt=\"thumbnail\" width=\"150px\" />\n                  <h5 data-testid={`${i}-card-name`}>{(e.strDrink.length > 30) ? `${e.strDrink.slice(0, 30)}...` : e.strDrink}</h5>\n                </div>\n              </Link>,\n            ];\n          }\n          return arr;\n        }, [])}\n      </div>\n      {goToRoute && <Redirect to={`/bebidas/${id}`} />}\n    </div>\n  );\n}\n\nexport default DrinkSearchBar;\n"]},"metadata":{},"sourceType":"module"}