{"ast":null,"code":"import _slicedToArray from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState}from'react';import{Redirect}from'react-router-dom';import{getDate}from'./CockTailsControlsRecipeProgress';export function handleChecked(event,value,type,values){var checked=values.checked,setCountChecked=values.setCountChecked,countChecked=values.countChecked,checkLocalStorage=values.checkLocalStorage,setChecked=values.setChecked,id=values.id;checked.checkbox.forEach(function(checkbox,i){if(event.target.checked===true){setCountChecked(countChecked+1);}if(event.target.checked===false){if(checkLocalStorage.countChecked<0){setCountChecked(countChecked+1);}else{setCountChecked(countChecked-1);}}if(checkbox.id===Number(event.target.id)){checked.checkbox[i].checked=event.target.checked;}});setChecked(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{checked:_objectSpread(_objectSpread({},prevState.checkbox.checked),{},{checkbox:value})});});var newStorage=_objectSpread(_objectSpread({},checkLocalStorage),{},{meals:_objectSpread(_objectSpread({},checkLocalStorage.meals),{},_defineProperty({},id,_toConsumableArray(checked.checkbox)))});localStorage.setItem('inProgressRecipes',JSON.stringify(newStorage));}function doneRecipe(recipeInfo,setGoToRoute){var idMeal=recipeInfo.idMeal,strArea=recipeInfo.strArea,strCategory=recipeInfo.strCategory,strMeal=recipeInfo.strMeal,strMealThumb=recipeInfo.strMealThumb,strTags=recipeInfo.strTags;var mealInfo={id:idMeal,type:'comida',area:strArea,category:strCategory,alcoholicOrNot:'',name:strMeal,image:strMealThumb,doneDate:getDate(),tags:strTags===null?[]:strTags.split(',')};var storage=JSON.parse(localStorage.getItem('doneRecipes'));if(!storage){storage=[];var newStorage=[].concat(_toConsumableArray(storage),[mealInfo]);localStorage.setItem('doneRecipes',JSON.stringify(newStorage));}else{var _newStorage=[].concat(_toConsumableArray(storage),[mealInfo]);localStorage.setItem('doneRecipes',JSON.stringify(_newStorage));}setGoToRoute(true);}var renderButton=function renderButton(inProgressRecipe,setGoToRoute){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"start-button in-progress\",enable:true,\"data-testid\":\"finish-recipe-btn\",onClick:function onClick(){return doneRecipe(inProgressRecipe,setGoToRoute);},type:\"button\"},\"Finish Recipe Button\"));};function MealsControlsRecipeProgress(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),goToRoute=_useState2[0],setGoToRoute=_useState2[1];var valuesToRender=props.valuesToRender;var inProgressRecipe=valuesToRender.inProgressRecipe,data=valuesToRender.data,checkLocalStorage=valuesToRender.checkLocalStorage,buttonEnabled=valuesToRender.buttonEnabled,id=valuesToRender.id,checked=valuesToRender.checked;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{\"data-testid\":\"recipe-category\"},inProgressRecipe.strMeal),/*#__PURE__*/React.createElement(\"h2\",{\"data-testid\":\"recipe-category\"},inProgressRecipe.strCategory),/*#__PURE__*/React.createElement(\"h3\",{\"data-testid\":\"recipe-title\"},\" Ingredients \"),data.map(function(element,i){return/*#__PURE__*/React.createElement(\"div\",{key:element.meal,\"data-testid\":\"\".concat(i,\"-ingredient-step\")},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"input\",{id:i,type:\"checkbox\",checked:checkLocalStorage.meals[id][i].checked,name:element.meal,onClick:function onClick(event){return handleChecked(event,checked.checkbox[i].checked,'meals',valuesToRender);}}),/*#__PURE__*/React.createElement(\"span\",null,element.meal),element.mensure));}),/*#__PURE__*/React.createElement(\"div\",{className:\"instructions\",\"data-testid\":\"instructions\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Instru\\xE7\\xF5es\"),/*#__PURE__*/React.createElement(\"p\",null,inProgressRecipe.strInstructions)),/*#__PURE__*/React.createElement(\"div\",null,buttonEnabled?renderButton(inProgressRecipe,setGoToRoute):/*#__PURE__*/React.createElement(\"button\",{className:\"start-button in-progress\",disabled:true,\"data-testid\":\"finish-recipe-btn\",type:\"button\"},\"Finish Recipe Button\")),goToRoute&&/*#__PURE__*/React.createElement(Redirect,{to:\"/receitas-feitas\"}));}export default MealsControlsRecipeProgress;","map":{"version":3,"sources":["/home/diego/GitHub/recipes-app/src/components/helpersComponents/MealsControlsRecipeProgress.jsx"],"names":["React","useState","Redirect","getDate","handleChecked","event","value","type","values","checked","setCountChecked","countChecked","checkLocalStorage","setChecked","id","checkbox","forEach","i","target","Number","prevState","newStorage","meals","localStorage","setItem","JSON","stringify","doneRecipe","recipeInfo","setGoToRoute","idMeal","strArea","strCategory","strMeal","strMealThumb","strTags","mealInfo","area","category","alcoholicOrNot","name","image","doneDate","tags","split","storage","parse","getItem","renderButton","inProgressRecipe","MealsControlsRecipeProgress","props","goToRoute","valuesToRender","data","buttonEnabled","map","element","meal","mensure","strInstructions"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Redirect } from 'react-router-dom';\nimport { getDate } from './CockTailsControlsRecipeProgress';\n\nexport function handleChecked(event, value, type, values) {\n  const {\n    checked, setCountChecked, countChecked, checkLocalStorage, setChecked, id,\n  } = values;\n  checked.checkbox.forEach((checkbox, i) => {\n    if (event.target.checked === true) {\n      setCountChecked(countChecked + 1);\n    } if (event.target.checked === false) {\n      if (checkLocalStorage.countChecked < 0) {\n        setCountChecked(countChecked + 1);\n      } else {\n        setCountChecked(countChecked - 1);\n      }\n    }\n    if (checkbox.id === Number(event.target.id)) {\n      checked.checkbox[i].checked = event.target.checked;\n    }\n  });\n  setChecked((prevState) => ({\n    ...prevState,\n    checked: {\n      ...prevState.checkbox.checked,\n      checkbox: value,\n    },\n  }));\n  const newStorage = {\n    ...checkLocalStorage,\n    meals: { ...checkLocalStorage.meals, [id]: [...checked.checkbox] },\n  };\n  localStorage.setItem('inProgressRecipes', JSON.stringify(newStorage));\n}\n\nfunction doneRecipe(recipeInfo, setGoToRoute) {\n  const {\n    idMeal, strArea, strCategory, strMeal, strMealThumb, strTags,\n  } = recipeInfo;\n  const mealInfo = {\n    id: idMeal,\n    type: 'comida',\n    area: strArea,\n    category: strCategory,\n    alcoholicOrNot: '',\n    name: strMeal,\n    image: strMealThumb,\n    doneDate: getDate(),\n    tags: strTags === null ? [] : strTags.split(','),\n  };\n  let storage = JSON.parse(localStorage.getItem('doneRecipes'));\n  if (!storage) {\n    storage = [];\n    const newStorage = [...storage, mealInfo];\n    localStorage.setItem('doneRecipes', JSON.stringify(newStorage));\n  } else {\n    const newStorage = [...storage, mealInfo];\n    localStorage.setItem('doneRecipes', JSON.stringify(newStorage));\n  }\n  setGoToRoute(true);\n}\n\nconst renderButton = (inProgressRecipe, setGoToRoute) => (\n  <div>\n    <button\n      className=\"start-button in-progress\"\n      enable\n      data-testid=\"finish-recipe-btn\"\n      onClick={() => doneRecipe(inProgressRecipe, setGoToRoute)}\n      type=\"button\"\n    >\n      Finish Recipe Button\n    </button>\n  </div>\n);\n\nfunction MealsControlsRecipeProgress(props) {\n  const [goToRoute, setGoToRoute] = useState(false);\n  const { valuesToRender } = props;\n  const {\n    inProgressRecipe, data, checkLocalStorage, buttonEnabled,\n    id, checked,\n  } = valuesToRender;\n  return (\n    <div>\n      <h1 data-testid=\"recipe-category\">{inProgressRecipe.strMeal}</h1>\n      <h2 data-testid=\"recipe-category\">{inProgressRecipe.strCategory}</h2>\n      <h3 data-testid=\"recipe-title\"> Ingredients </h3>\n      {data.map((element, i) => (\n        <div key={element.meal} data-testid={`${i}-ingredient-step`}>\n          <span>\n            {/* {console.log(checkLocalStorage.meals[id][i])} */}\n            <input id={i} type=\"checkbox\" checked={checkLocalStorage.meals[id][i].checked} name={element.meal} onClick={(event) => handleChecked(event, checked.checkbox[i].checked, 'meals', valuesToRender)} />\n            <span>{element.meal}</span>\n            {element.mensure}\n          </span>\n        </div>\n      ))}\n      <div className=\"instructions\" data-testid=\"instructions\">\n        <h3>Instruções</h3>\n        <p>{inProgressRecipe.strInstructions}</p>\n      </div>\n      <div>\n        {buttonEnabled\n          ? (\n            renderButton(inProgressRecipe, setGoToRoute)\n          )\n          : (\n            <button\n              className=\"start-button in-progress\"\n              disabled\n              data-testid=\"finish-recipe-btn\"\n              type=\"button\"\n            >\n              Finish Recipe Button\n            </button>\n          )}\n      </div>\n      {goToRoute && <Redirect to=\"/receitas-feitas\" />}\n    </div>\n  );\n}\n\nexport default MealsControlsRecipeProgress;\n\nMealsControlsRecipeProgress.propTypes = {\n  valuesToRender: PropTypes.string.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}