{"ast":null,"code":"import _toConsumableArray from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/diego/GitHub/recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Redirect,Link}from'react-router-dom';import*as api from'../services/foodApi';import'./CSS/SearchBar.css';function checkResults(data,setResult,setGoToRoute,setId){if(data.meals===null){alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');}else if(data.meals.length===1){setId(data.meals[0].idMeal);setGoToRoute(true);}else if(data.meals.length>1){setResult(data.meals);}}function renderRadioButtons(setSearchBy,setDisabled){return/*#__PURE__*/React.createElement(\"div\",{className:\"radio-buttons\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"ingredient\"},/*#__PURE__*/React.createElement(\"input\",{id:\"ingredient\",type:\"radio\",name:\"search\",\"data-testid\":\"ingredient-search-radio\",onChange:function onChange(e){setSearchBy(e.target.id);setDisabled(false);}}),\"Ingrediente\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},/*#__PURE__*/React.createElement(\"input\",{id:\"name\",type:\"radio\",name:\"search\",\"data-testid\":\"name-search-radio\",onChange:function onChange(e){setSearchBy(e.target.id);setDisabled(false);}}),\"Nome\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"first-letter\"},/*#__PURE__*/React.createElement(\"input\",{id:\"first-letter\",type:\"radio\",name:\"search\",\"data-testid\":\"first-letter-search-radio\",onChange:function onChange(e){setSearchBy(e.target.id);setDisabled(false);}}),\"Primeira Letra\"));}function doSearch(searchBy,searchedItem,setResult,setGoToRoute,setId){switch(searchBy){case'ingredient':{api.getByIgredient(searchedItem).then(function(data){return checkResults(data,setResult,setGoToRoute,setId);});break;}case'name':{api.getMealByName(searchedItem).then(function(data){return checkResults(data,setResult,setGoToRoute,setId);});break;}default:{if(searchedItem.length>1){alert('Sua busca deve conter somente 1 (um) caracter');}if(searchedItem.length===1){api.getByFirstLetter(searchedItem).then(function(data){return checkResults(data,setResult,setGoToRoute,setId);});}}}}function FoodSearchBar(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchedItem=_useState2[0],setSearchedItem=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchBy=_useState4[0],setSearchBy=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),result=_useState6[0],setResult=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),goToRoute=_useState8[0],setGoToRoute=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),id=_useState10[0],setId=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),disabled=_useState12[0],setDisabled=_useState12[1];return/*#__PURE__*/React.createElement(\"div\",{className:\"search-area slide-in-top\"},/*#__PURE__*/React.createElement(\"input\",{id:\"searched-item\",className:\"searched-item\",type:\"text\",placeholder:\"Buscar\",onChange:function onChange(e){return setSearchedItem(e.target.value);},value:searchedItem,\"data-testid\":\"search-input\"}),renderRadioButtons(setSearchBy,setDisabled),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return doSearch(searchBy,searchedItem,setResult,setGoToRoute,setId);},className:\"search-button\",type:\"button\",\"data-testid\":\"exec-search-btn\",disabled:disabled},\"Buscar\"),/*#__PURE__*/React.createElement(\"div\",{className:\"recipes-results\"},result.reduce(function(arr,e,i){if(i<12){return[].concat(_toConsumableArray(arr),[/*#__PURE__*/React.createElement(Link,{to:\"/comidas/\".concat(e.idMeal),key:e.idMeal},/*#__PURE__*/React.createElement(\"div\",{className:\"product-pic product-pic-\".concat(i),\"data-testid\":\"\".concat(i,\"-recipe-card\")},/*#__PURE__*/React.createElement(\"img\",{\"data-testid\":\"\".concat(i,\"-card-img\"),className:\"recipe-image\",src:e.strMealThumb,alt:\"thumbnail\",width:\"120px\"}),/*#__PURE__*/React.createElement(\"h5\",{\"data-testid\":\"\".concat(i,\"-card-name\")},e.strMeal.length>30?\"\".concat(e.strMeal.slice(0,30),\"...\"):e.strMeal)))]);}return arr;},[])),goToRoute&&/*#__PURE__*/React.createElement(Redirect,{to:\"/comidas/\".concat(id)}));}export default FoodSearchBar;","map":{"version":3,"sources":["/home/diego/GitHub/recipes-app/src/components/FoodSearchBar.jsx"],"names":["React","useState","Redirect","Link","api","checkResults","data","setResult","setGoToRoute","setId","meals","alert","length","idMeal","renderRadioButtons","setSearchBy","setDisabled","e","target","id","doSearch","searchBy","searchedItem","getByIgredient","then","getMealByName","getByFirstLetter","FoodSearchBar","setSearchedItem","result","goToRoute","disabled","value","reduce","arr","i","strMealThumb","strMeal","slice"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport * as api from '../services/foodApi';\nimport './CSS/SearchBar.css';\n\nfunction checkResults(data, setResult, setGoToRoute, setId) {\n  if (data.meals === null) {\n    alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n  } else if (data.meals.length === 1) {\n    setId(data.meals[0].idMeal);\n    setGoToRoute(true);\n  } else if (data.meals.length > 1) {\n    setResult(data.meals);\n  }\n}\n\nfunction renderRadioButtons(setSearchBy, setDisabled) {\n  return (\n    <div className=\"radio-buttons\">\n      <label htmlFor=\"ingredient\">\n        <input\n          id=\"ingredient\"\n          type=\"radio\"\n          name=\"search\"\n          data-testid=\"ingredient-search-radio\"\n          onChange={(e) => {\n            setSearchBy(e.target.id);\n            setDisabled(false);\n          }}\n        />\n        Ingrediente\n      </label>\n      <label htmlFor=\"name\">\n        <input\n          id=\"name\"\n          type=\"radio\"\n          name=\"search\"\n          data-testid=\"name-search-radio\"\n          onChange={(e) => {\n            setSearchBy(e.target.id);\n            setDisabled(false);\n          }}\n        />\n        Nome\n      </label>\n      <label htmlFor=\"first-letter\">\n        <input\n          id=\"first-letter\"\n          type=\"radio\"\n          name=\"search\"\n          data-testid=\"first-letter-search-radio\"\n          onChange={(e) => {\n            setSearchBy(e.target.id);\n            setDisabled(false);\n          }}\n        />\n        Primeira Letra\n      </label>\n    </div>\n  );\n}\n\nfunction doSearch(searchBy, searchedItem, setResult, setGoToRoute, setId) {\n  switch (searchBy) {\n    case 'ingredient': {\n      api.getByIgredient(searchedItem)\n        .then((data) => checkResults(data, setResult, setGoToRoute, setId));\n      break;\n    }\n    case 'name': {\n      api.getMealByName(searchedItem)\n        .then((data) => checkResults(data, setResult, setGoToRoute, setId));\n      break;\n    }\n    default: {\n      if (searchedItem.length > 1) { alert('Sua busca deve conter somente 1 (um) caracter'); }\n      if (searchedItem.length === 1) {\n        api.getByFirstLetter(searchedItem)\n          .then((data) => checkResults(data, setResult, setGoToRoute, setId));\n      }\n    }\n  }\n}\n\nfunction FoodSearchBar() {\n  const [searchedItem, setSearchedItem] = useState('');\n  const [searchBy, setSearchBy] = useState('');\n  const [result, setResult] = useState([]);\n  const [goToRoute, setGoToRoute] = useState(false);\n  const [id, setId] = useState('');\n  const [disabled, setDisabled] = useState(true);\n\n  return (\n    <div className=\"search-area slide-in-top\">\n      <input\n        id=\"searched-item\"\n        className=\"searched-item\"\n        type=\"text\"\n        placeholder=\"Buscar\"\n        onChange={(e) => setSearchedItem(e.target.value)}\n        value={searchedItem}\n        data-testid=\"search-input\"\n      />\n      {renderRadioButtons(setSearchBy, setDisabled)}\n      <button\n        onClick={() => doSearch(searchBy, searchedItem, setResult, setGoToRoute, setId)}\n        className=\"search-button\"\n        type=\"button\"\n        data-testid=\"exec-search-btn\"\n        disabled={disabled}\n      >\n        Buscar\n      </button>\n      <div className=\"recipes-results\">\n        {result.reduce((arr, e, i) => {\n          if (i < 12) {\n            return [...arr,\n              <Link to={`/comidas/${e.idMeal}`} key={e.idMeal}>\n                <div className={`product-pic product-pic-${i}`} data-testid={`${i}-recipe-card`}>\n                  <img data-testid={`${i}-card-img`} className=\"recipe-image\" src={e.strMealThumb} alt=\"thumbnail\" width=\"120px\" />\n                  <h5 data-testid={`${i}-card-name`}>{(e.strMeal.length > 30) ? `${e.strMeal.slice(0, 30)}...` : e.strMeal }</h5>\n                </div>\n              </Link>,\n            ];\n          }\n          return arr;\n        }, [])}\n      </div>\n      {goToRoute && <Redirect to={`/comidas/${id}`} />}\n    </div>\n  );\n}\n\nexport default FoodSearchBar;\n"]},"metadata":{},"sourceType":"module"}